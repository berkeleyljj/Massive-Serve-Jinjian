{"version":3,"file":"index-DBhzJDZb.js","sources":["../../src/components/QueryHistory.js","../../src/components/SearchControls.js","../../src/components/SearchResults.js","../../src/components/QueryInput.js","../../src/services/SearchService.js","../../src/App.js","../../src/main.js"],"sourcesContent":["export class QueryHistory {\n  constructor(container, onSelect, onRename, onDelete) {\n    this.container = container\n    this.onSelect = onSelect\n    this.onRename = onRename\n    this.onDelete = onDelete\n    this.history = []\n    this.editingId = null\n    \n    this.render()\n  }\n  \n  updateHistory(history) {\n    this.history = history\n    this.render()\n  }\n  \n  render() {\n    if (this.history.length === 0) {\n      this.container.innerHTML = `\n        <div class=\"p-4 text-center text-chat-text-secondary\">\n          <p>No search history yet</p>\n          <p class=\"text-sm mt-2\">Your searches will appear here</p>\n        </div>\n      `\n      return\n    }\n    \n    this.container.innerHTML = this.history.map(item => this.renderHistoryItem(item)).join('')\n    this.attachEventListeners()\n  }\n  \n  renderHistoryItem(item) {\n    const isEditing = this.editingId === item.id\n    const date = new Date(item.timestamp).toLocaleDateString()\n    const time = new Date(item.timestamp).toLocaleTimeString()\n    \n    if (isEditing) {\n      return `\n        <div class=\"sidebar-item\" data-id=\"${item.id}\">\n          <div class=\"flex items-center space-x-2\">\n            <input \n              type=\"text\" \n              class=\"flex-1 px-2 py-1 border border-chat-border rounded text-sm\"\n              value=\"${item.query}\"\n              data-edit-input\n            >\n            <button class=\"text-green-600 hover:text-green-700\" data-save-edit>\n              <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M5 13l4 4L19 7\"></path>\n              </svg>\n            </button>\n            <button class=\"text-gray-600 hover:text-gray-700\" data-cancel-edit>\n              <svg class=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\"></path>\n              </svg>\n            </button>\n          </div>\n        </div>\n      `\n    }\n    \n    return `\n      <div class=\"sidebar-item group\" data-id=\"${item.id}\">\n        <div class=\"flex items-start justify-between\">\n          <div class=\"flex-1 min-w-0 cursor-pointer\" data-select-query>\n            <p class=\"text-sm font-medium text-chat-text truncate\">${item.query}</p>\n            <p class=\"text-xs text-chat-text-secondary mt-1\">${date} at ${time}</p>\n          </div>\n          <div class=\"opacity-0 group-hover:opacity-100 transition-opacity duration-200 flex items-center space-x-1\">\n            <button class=\"text-chat-text-secondary hover:text-chat-text p-1\" data-edit-query title=\"Rename\">\n              <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z\"></path>\n              </svg>\n            </button>\n            <button class=\"text-chat-text-secondary hover:text-red-600 p-1\" data-delete-query title=\"Delete\">\n              <svg class=\"w-3 h-3\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\"></path>\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    `\n  }\n  \n  attachEventListeners() {\n    // Select query\n    this.container.querySelectorAll('[data-select-query]').forEach(element => {\n      element.addEventListener('click', (e) => {\n        const itemId = parseInt(e.target.closest('[data-id]').dataset.id)\n        const item = this.history.find(h => h.id === itemId)\n        if (item) {\n          this.onSelect(item)\n        }\n      })\n    })\n    \n    // Edit query\n    this.container.querySelectorAll('[data-edit-query]').forEach(element => {\n      element.addEventListener('click', (e) => {\n        e.stopPropagation()\n        const itemId = parseInt(e.target.closest('[data-id]').dataset.id)\n        this.editingId = itemId\n        this.render()\n        \n        // Focus the input\n        const input = this.container.querySelector('[data-edit-input]')\n        if (input) {\n          input.focus()\n          input.select()\n        }\n      })\n    })\n    \n    // Save edit\n    this.container.querySelectorAll('[data-save-edit]').forEach(element => {\n      element.addEventListener('click', (e) => {\n        e.stopPropagation()\n        const itemId = parseInt(e.target.closest('[data-id]').dataset.id)\n        const input = e.target.closest('[data-id]').querySelector('[data-edit-input]')\n        const newName = input.value.trim()\n        \n        if (newName) {\n          const item = this.history.find(h => h.id === itemId)\n          if (item) {\n            this.onRename(item, newName)\n          }\n        }\n        \n        this.editingId = null\n        this.render()\n      })\n    })\n    \n    // Cancel edit\n    this.container.querySelectorAll('[data-cancel-edit]').forEach(element => {\n      element.addEventListener('click', (e) => {\n        e.stopPropagation()\n        this.editingId = null\n        this.render()\n      })\n    })\n    \n    // Delete query\n    this.container.querySelectorAll('[data-delete-query]').forEach(element => {\n      element.addEventListener('click', (e) => {\n        e.stopPropagation()\n        const itemId = parseInt(e.target.closest('[data-id]').dataset.id)\n        const item = this.history.find(h => h.id === itemId)\n        if (item) {\n          this.onDelete(item)\n        }\n      })\n    })\n    \n    // Handle Enter key in edit input\n    this.container.querySelectorAll('[data-edit-input]').forEach(element => {\n      element.addEventListener('keydown', (e) => {\n        if (e.key === 'Enter') {\n          e.preventDefault()\n          const itemId = parseInt(e.target.closest('[data-id]').dataset.id)\n          const newName = e.target.value.trim()\n          \n          if (newName) {\n            const item = this.history.find(h => h.id === itemId)\n            if (item) {\n              this.onRename(item, newName)\n            }\n          }\n          \n          this.editingId = null\n          this.render()\n        } else if (e.key === 'Escape') {\n          e.preventDefault()\n          this.editingId = null\n          this.render()\n        }\n      })\n    })\n  }\n} ","export class SearchControls {\n  constructor(container, onChange) {\n    this.container = container\n    this.onChange = onChange\n    this.searchParams = {\n      n_docs: 10,\n      nprobe: 32,\n      exact_rerank: false,\n      use_diverse: false,\n      lambda: 0.5\n    }\n    \n    this.render()\n  }\n  \n  render() {\n    this.container.innerHTML = `\n      <div class=\"flex flex-wrap items-center gap-4\">\n        <div class=\"flex items-center space-x-2\">\n          <label class=\"text-sm font-medium text-chat-text\">nprobe:</label>\n          <div class=\"relative group\">\n            <button class=\"text-gray-400 hover:text-gray-600 text-xs ml-1\" title=\"Number of clusters to search in FAISS index. Higher values = more thorough but slower search.\">?</button>\n            <div class=\"absolute top-full left-0 mt-2 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50\">\n              Number of clusters to search in FAISS index. Higher values = more thorough but slower search.\n            </div>\n          </div>\n          <select class=\"dropdown text-sm\" data-nprobe>\n            <option value=\"1\">1</option>\n            <option value=\"8\">8</option>\n            <option value=\"32\" selected>32</option>\n            <option value=\"64\">64</option>\n            <option value=\"128\">128</option>\n          </select>\n        </div>\n        \n        <div class=\"flex items-center space-x-2\">\n          <label class=\"text-sm font-medium text-chat-text\">k:</label>\n          <div class=\"relative group\">\n            <button class=\"text-gray-400 hover:text-gray-600 text-xs ml-1\" title=\"Number of documents to retrieve. Higher values = more results but may be less relevant.\">?</button>\n            <div class=\"absolute top-full left-0 mt-2 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50\">\n              Number of documents to retrieve. Higher values = more results but may be less relevant.\n            </div>\n          </div>\n          <select class=\"dropdown text-sm\" data-k>\n            <option value=\"5\">5</option>\n            <option value=\"10\" selected>10</option>\n            <option value=\"20\">20</option>\n            <option value=\"50\">50</option>\n            <option value=\"100\">100</option>\n          </select>\n        </div>\n        \n        <div class=\"flex items-center space-x-2\">\n          <label class=\"text-sm font-medium text-chat-text\">Exact Rerank:</label>\n          <div class=\"relative group\">\n            <button class=\"text-gray-400 hover:text-gray-600 text-xs ml-1\" title=\"Enable exact reranking for more precise results. Slower but more accurate.\">?</button>\n            <div class=\"absolute top-full left-0 mt-2 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50\">\n              Enable exact reranking for more precise results. Slower but more accurate.\n            </div>\n          </div>\n          <button class=\"toggle-switch disabled\" data-exact-rerank>\n            <span class=\"toggle-switch-thumb\"></span>\n          </button>\n        </div>\n        \n\n        \n        <!-- Diverse Search Options -->\n        <div class=\"flex items-center space-x-2\">\n          <label class=\"text-sm font-medium text-chat-text\">Diverse Search:</label>\n          <div class=\"relative group\">\n            <button class=\"text-gray-400 hover:text-gray-600 text-xs ml-1\" title=\"Enable diverse search to get more varied results using MMR algorithm.\">?</button>\n            <div class=\"absolute top-full left-0 mt-2 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50\">\n              Enable diverse search to get more varied results using MMR algorithm.\n            </div>\n          </div>\n          <button class=\"toggle-switch disabled\" data-diverse-search>\n            <span class=\"toggle-switch-thumb\"></span>\n          </button>\n        </div>\n        \n        <div class=\"flex items-center space-x-2\">\n          <label class=\"text-sm font-medium text-chat-text\">λ:</label>\n          <div class=\"relative group\">\n            <button class=\"text-gray-400 hover:text-gray-600 text-xs ml-1\" title=\"Diversity parameter for MMR algorithm. Higher values = more diverse results.\">?</button>\n            <div class=\"absolute top-full left-0 mt-2 w-64 p-2 bg-gray-800 text-white text-xs rounded shadow-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none z-50\">\n              Diversity parameter for MMR algorithm. Higher values = more diverse results.\n            </div>\n          </div>\n          <select class=\"dropdown text-sm\" data-lambda disabled>\n            <option value=\"0.1\">0.1</option>\n            <option value=\"0.3\">0.3</option>\n            <option value=\"0.5\" selected>0.5</option>\n            <option value=\"0.7\">0.7</option>\n            <option value=\"0.9\">0.9</option>\n          </select>\n        </div>\n      </div>\n    `\n    \n    this.attachEventListeners()\n  }\n  \n  attachEventListeners() {\n    // nprobe dropdown\n    this.container.querySelector('[data-nprobe]').addEventListener('change', (e) => {\n      this.searchParams.nprobe = parseInt(e.target.value)\n      this.onChange(this.searchParams)\n    })\n    \n    // k dropdown\n    this.container.querySelector('[data-k]').addEventListener('change', (e) => {\n      this.searchParams.n_docs = parseInt(e.target.value)\n      this.onChange(this.searchParams)\n    })\n    \n    // exact rerank toggle\n    this.container.querySelector('[data-exact-rerank]').addEventListener('click', (e) => {\n      const button = e.target.closest('[data-exact-rerank]')\n      this.searchParams.exact_rerank = !this.searchParams.exact_rerank\n      \n      if (this.searchParams.exact_rerank) {\n        button.classList.remove('disabled')\n        button.classList.add('enabled')\n      } else {\n        button.classList.remove('enabled')\n        button.classList.add('disabled')\n      }\n      \n      this.onChange(this.searchParams)\n    })\n    \n\n    \n    // diverse search toggle\n    this.container.querySelector('[data-diverse-search]').addEventListener('click', (e) => {\n      const button = e.target.closest('[data-diverse-search]')\n      this.searchParams.use_diverse = !this.searchParams.use_diverse\n      \n      if (this.searchParams.use_diverse) {\n        button.classList.remove('disabled')\n        button.classList.add('enabled')\n      } else {\n        button.classList.remove('enabled')\n        button.classList.add('disabled')\n      }\n      \n      // Toggle lambda state\n      const lambdaSelect = this.container.querySelector('[data-lambda]')\n      lambdaSelect.disabled = !this.searchParams.use_diverse\n      lambdaSelect.classList.toggle('bg-gray-100', !this.searchParams.use_diverse)\n      \n      this.onChange(this.searchParams)\n    })\n    \n    // lambda dropdown\n    this.container.querySelector('[data-lambda]').addEventListener('change', (e) => {\n      this.searchParams.lambda = parseFloat(e.target.value)\n      this.onChange(this.searchParams)\n    })\n  }\n  \n  setSearchParams(params) {\n    this.searchParams = { ...this.searchParams, ...params }\n    \n    // Update UI to reflect the new values\n    const nprobeSelect = this.container.querySelector('[data-nprobe]')\n    const kSelect = this.container.querySelector('[data-k]')\n    const exactRerankButton = this.container.querySelector('[data-exact-rerank]')\n    const diverseSearchButton = this.container.querySelector('[data-diverse-search]')\n    const lambdaSelect = this.container.querySelector('[data-lambda]')\n    \n    if (nprobeSelect) nprobeSelect.value = this.searchParams.nprobe\n    if (kSelect) kSelect.value = this.searchParams.n_docs\n    if (lambdaSelect) lambdaSelect.value = this.searchParams.lambda\n    \n    if (exactRerankButton) {\n      if (this.searchParams.exact_rerank) {\n        exactRerankButton.classList.remove('disabled')\n        exactRerankButton.classList.add('enabled')\n      } else {\n        exactRerankButton.classList.remove('enabled')\n        exactRerankButton.classList.add('disabled')\n      }\n    }\n    \n    if (diverseSearchButton) {\n      if (this.searchParams.use_diverse) {\n        diverseSearchButton.classList.remove('disabled')\n        diverseSearchButton.classList.add('enabled')\n      } else {\n        diverseSearchButton.classList.remove('enabled')\n        diverseSearchButton.classList.add('disabled')\n      }\n    }\n    \n    if (lambdaSelect) {\n      lambdaSelect.disabled = !this.searchParams.use_diverse\n      lambdaSelect.classList.toggle('bg-gray-100', !this.searchParams.use_diverse)\n    }\n  }\n  \n  getSearchParams() {\n    return { ...this.searchParams }\n  }\n} ","export class SearchResults {\n  constructor(container, onShowMore) {\n    this.container = container\n    this.onShowMore = onShowMore\n    this.results = null\n    this.expandedPassages = new Set()\n    this.isLoading = false\n    \n    this.render()\n  }\n  \n  render() {\n    if (!this.results) {\n      this.container.innerHTML = `\n        <div class=\"flex items-center justify-center h-full text-chat-text-secondary\">\n          <div class=\"text-center\">\n            <img src=\"./pod.jpg\" alt=\"Icon\" class=\"w-24 h-24 mx-auto mb-4\" />\n            <h2 class=\"text-4xl font-bold mb-2 text-gray-900\">Dive into Compact-DS!</h2>\n            <p class=\"text-base text-gray-700\">Query and cast your valuable vote for relevance!</p>\n          </div>\n        </div>\n      `\n      return\n    }\n    \n    if (this.isLoading) {\n      this.container.innerHTML = `\n        <div class=\"flex items-center justify-center h-full\">\n          <div class=\"text-center\">\n            <svg class=\"w-8 h-8 mx-auto mb-4 animate-spin text-chat-highlight\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\n            </svg>\n            <p class=\"text-chat-text-secondary\">Searching...</p>\n          </div>\n        </div>\n      `\n      return\n    }\n    \n    // Handle response format from your serve.py backend\n    let passages = []\n    \n    if (this.results && this.results.results) {\n      // Your backend returns results directly in the results field\n      passages = this.results.results\n      \n      // Handle nested array format (if results[0] is an array)\n      if (Array.isArray(passages) && Array.isArray(passages[0])) {\n        passages = passages[0]\n      }\n    }\n    \n    if (passages.length === 0) {\n      this.container.innerHTML = `\n        <div class=\"flex items-center justify-center h-full text-chat-text-secondary\">\n          <div class=\"text-center\">\n            <svg class=\"w-16 h-16 mx-auto mb-4 text-gray-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1\" d=\"M9.172 16.172a4 4 0 015.656 0M9 12h6m-6-4h6m2 5.291A7.962 7.962 0 0112 15c-2.34 0-4.47-.881-6.08-2.33\"></path>\n            </svg>\n            <p class=\"text-lg font-medium\">No results found</p>\n            <p class=\"text-sm mt-2\">Try adjusting your search parameters</p>\n          </div>\n        </div>\n      `\n      return\n    }\n    \n    this.container.innerHTML = `\n      <div class=\"space-y-6\">\n        ${passages.map((passage, index) => this.renderPassage(passage, index)).join('')}\n      </div>\n    `\n    \n    this.attachEventListeners()\n  }\n  \n  renderPassage(passage, index) {\n    const isExpanded = this.expandedPassages.has(passage.index_id)\n    const highlightedText = this.highlightQueryTerms(passage.text, passage.matched_spans || [])\n    \n    return `\n      <div class=\"bg-white rounded-lg shadow-chat p-6 relative\" data-passage-id=\"${passage.index_id}\">\n        <div class=\"prose max-w-none\">\n          <div class=\"text-chat-text leading-relaxed mb-4\" data-original-text=\"${this.escapeHtml(passage.text)}\">\n            ${highlightedText}\n          </div>\n        </div>\n        \n        <div class=\"mt-4 pt-4 border-t border-chat-border\">\n          <div class=\"flex items-center justify-between\">\n            <div class=\"text-sm text-chat-text-secondary\">\n              #${index + 1} • Source: ${passage.filename || passage.source || 'Unknown'}\n            </div>\n            <div class=\"flex items-center space-x-4\">\n              <button \n                class=\"chat-button-secondary\"\n                data-show-more\n                data-index-id=\"${passage.index_id}\"\n                data-offset=\"1\"\n              >\n                ${isExpanded ? 'Show Less' : 'Show More'}\n              </button>\n            </div>\n          </div>\n        </div>\n        \n        <!-- Rating Feedback Section -->\n        <div class=\"absolute bottom-4 right-4 flex items-center space-x-3 bg-gray-50 px-3 py-2 rounded-lg border\">\n          <span class=\"text-sm font-medium text-gray-700\">Is this passage relevant?</span>\n          <button \n            onclick=\"this.parentElement.innerHTML='<span class=\\\\'text-sm text-green-600 font-medium\\\\'>✓ Thanks for the feedback!</span>'\"\n            class=\"text-gray-400 hover:text-green-600 text-lg font-bold transition-colors\"\n            title=\"Yes, this passage is relevant\"\n          >\n            [YES]\n          </button>\n          <button \n            onclick=\"this.parentElement.innerHTML='<span class=\\\\'text-sm text-red-600 font-medium\\\\'>✗ Thanks for the feedback!</span>'\"\n            class=\"text-gray-400 hover:text-red-600 text-lg font-bold transition-colors\"\n            title=\"No, this passage is not relevant\"\n          >\n            [NO]\n          </button>\n        </div>\n        \n        ${isExpanded ? this.renderExpandedContent(passage) : ''}\n      </div>\n    `\n  }\n  \n  renderExpandedContent(passage) {\n    const expandedPassages = this.getExpandedPassages(passage.index_id)\n    \n    if (!expandedPassages || expandedPassages.length === 0) {\n      return `\n        <div class=\"mt-4 p-4 bg-gray-50 rounded-lg\">\n          <p class=\"text-sm text-chat-text-secondary\">Loading expanded content...</p>\n        </div>\n      `\n    }\n    \n    return `\n      <div class=\"mt-4 space-y-4\">\n        ${expandedPassages.map(expandedPassage => `\n          <div class=\"pl-4 border-l-2 border-chat-border\">\n            <div class=\"prose max-w-none\">\n              <div class=\"text-chat-text leading-relaxed text-sm\">\n                ${this.highlightQueryTerms(expandedPassage.text, expandedPassage.matched_spans || [])}\n              </div>\n            </div>\n            <div class=\"mt-2 text-xs text-chat-text-secondary\">\n              #${expandedPassage.index_id} • Source: ${expandedPassage.filename || 'Unknown'}\n            </div>\n          </div>\n        `).join('')}\n      </div>\n    `\n  }\n  \n  highlightQueryTerms(text, matchedSpans) {\n    if (!matchedSpans || matchedSpans.length === 0) {\n      return this.escapeHtml(text)\n    }\n    \n    // Sort spans by start position to process them in order\n    const sortedSpans = [...matchedSpans].sort((a, b) => a.start - b.start)\n    \n    let result = ''\n    let lastIndex = 0\n    \n    sortedSpans.forEach(span => {\n      // Add text before the span\n      result += this.escapeHtml(text.substring(lastIndex, span.start))\n      \n      // Add highlighted span\n      const spanText = text.substring(span.start, span.end)\n      result += `<span class=\"passage-highlight\">${this.escapeHtml(spanText)}</span>`\n      \n      lastIndex = span.end\n    })\n    \n    // Add remaining text\n    result += this.escapeHtml(text.substring(lastIndex))\n    \n    return result\n  }\n  \n  escapeHtml(text) {\n    const div = document.createElement('div')\n    div.textContent = text\n    return div.innerHTML\n  }\n  \n  attachEventListeners() {\n    this.container.querySelectorAll('[data-show-more]').forEach(button => {\n      button.addEventListener('click', (e) => {\n        const indexId = parseInt(e.target.dataset.indexId)\n        const offset = parseInt(e.target.dataset.offset)\n        \n        if (this.expandedPassages.has(indexId)) {\n          // Collapse\n          this.expandedPassages.delete(indexId)\n          this.removeExpandedPassages(indexId)\n          this.render()\n          \n          // Scroll to ensure metadata line is visible with 95px buffer (matching your old UI)\n          setTimeout(() => {\n            const passageElement = this.container.querySelector(`[data-passage-id=\"${indexId}\"]`)\n            if (passageElement) {\n              const rect = passageElement.getBoundingClientRect()\n              const containerRect = this.container.getBoundingClientRect()\n              const scrollTop = this.container.scrollTop\n              \n              if (rect.top < containerRect.top + 95) {\n                this.container.scrollTop = scrollTop + (rect.top - containerRect.top) - 95\n              }\n            }\n          }, 0)\n        } else {\n          // Expand\n          this.expandedPassages.add(indexId)\n          this.render()\n          this.onShowMore(indexId, offset)\n        }\n      })\n    })\n  }\n  \n  displayResults(results) {\n    console.log('DisplayResults called with:', results) // Debug log\n    this.results = results\n    this.expandedPassages.clear()\n    this.render()\n  }\n  \n  displayError(message) {\n    this.container.innerHTML = `\n      <div class=\"flex items-center justify-center h-full\">\n        <div class=\"text-center\">\n          <svg class=\"w-16 h-16 mx-auto mb-4 text-red-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"1\" d=\"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"></path>\n          </svg>\n          <p class=\"text-lg font-medium text-red-600\">Error</p>\n          <p class=\"text-sm mt-2 text-chat-text-secondary\">${message}</p>\n        </div>\n      </div>\n    `\n  }\n  \n  setLoading(loading) {\n    this.isLoading = loading\n    if (loading) {\n      this.render()\n    }\n  }\n  \n  expandPassage(indexId, expandedResults) {\n    // Store expanded results for this passage - handle your serve.py response format\n    let passages = []\n    \n    if (expandedResults && expandedResults.results) {\n      // Your backend returns results directly in the results field\n      passages = expandedResults.results\n      \n      // Handle nested array format (if results[0] is an array)\n      if (Array.isArray(passages) && Array.isArray(passages[0])) {\n        passages = passages[0]\n      }\n    }\n    \n    this.setExpandedPassages(indexId, passages)\n    \n    // Update the specific passage with expanded content\n    const passageElement = this.container.querySelector(`[data-passage-id=\"${indexId}\"]`)\n    if (passageElement && passages.length > 0) {\n      const passage = passages[0]\n      const textDiv = passageElement.querySelector('.text-chat-text')\n      const button = passageElement.querySelector('[data-show-more]')\n      \n      if (textDiv && passage.text) {\n        const originalText = textDiv.dataset.originalText || textDiv.textContent\n        const expandedText = passage.text.trim()\n        \n        // Highlight original text within expanded content\n        let mergedText = expandedText\n        if (originalText && originalText !== expandedText) {\n          const escapedOriginal = originalText.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&')\n          mergedText = expandedText.replace(\n            new RegExp(escapedOriginal, \"g\"),\n            `<span class=\"border-b-2 border-green-500\">${originalText}</span>`\n          )\n        }\n        \n        textDiv.innerHTML = mergedText\n        textDiv.dataset.expandedText = mergedText\n        \n        // Update button state\n        if (button) {\n          const currentOffset = parseInt(button.dataset.offset) || 1\n          const newOffset = currentOffset + 1\n          button.dataset.offset = newOffset\n          \n          // Disable after 3 expansions\n          if (newOffset > 3) {\n            button.disabled = true\n            button.classList.add('text-gray-400', 'cursor-not-allowed')\n            button.classList.remove('text-blue-600', 'hover:underline')\n            button.textContent = 'Expansion limit reached'\n          }\n        }\n      }\n    }\n  }\n  \n  setExpandedPassages(indexId, passages) {\n    if (!this.expandedPassagesData) {\n      this.expandedPassagesData = new Map()\n    }\n    this.expandedPassagesData.set(indexId, passages)\n  }\n  \n  getExpandedPassages(indexId) {\n    if (!this.expandedPassagesData) {\n      return []\n    }\n    return this.expandedPassagesData.get(indexId) || []\n  }\n  \n  removeExpandedPassages(indexId) {\n    if (this.expandedPassagesData) {\n      this.expandedPassagesData.delete(indexId)\n    }\n  }\n} ","export class QueryInput {\n  constructor(container, onSubmit) {\n    this.container = container\n    this.onSubmit = onSubmit\n    this.isLoading = false\n    \n    this.render()\n  }\n  \n  render() {\n    this.container.innerHTML = `\n      <div class=\"flex items-end space-x-3\">\n        <div class=\"flex-1 relative\">\n          <textarea \n            class=\"chat-input pr-12 resize-none\" \n            rows=\"1\"\n            placeholder=\"Enter your search query...\"\n            data-query-input\n          ></textarea>\n          <button \n            class=\"absolute right-3 bottom-3 text-chat-text-secondary hover:text-chat-highlight disabled:opacity-50 disabled:cursor-not-allowed\"\n            data-send-button\n            disabled\n          >\n            <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n              <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"></path>\n            </svg>\n          </button>\n        </div>\n        <button \n          class=\"chat-button disabled:opacity-50 disabled:cursor-not-allowed\"\n          data-send-button\n          disabled\n        >\n          <span data-button-text>Send</span>\n          <svg class=\"w-4 h-4 ml-2 hidden\" data-loading-icon fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15\"></path>\n          </svg>\n        </button>\n      </div>\n    `\n    \n    this.attachEventListeners()\n  }\n  \n  attachEventListeners() {\n    const textarea = this.container.querySelector('[data-query-input]')\n    const sendButtons = this.container.querySelectorAll('[data-send-button]')\n    \n    // Auto-resize textarea\n    textarea.addEventListener('input', () => {\n      this.adjustTextareaHeight(textarea)\n      this.updateSendButtonState()\n    })\n    \n    // Handle Enter key (send on Enter, new line on Shift+Enter)\n    textarea.addEventListener('keydown', (e) => {\n      if (e.key === 'Enter' && !e.shiftKey) {\n        e.preventDefault()\n        this.handleSubmit()\n      }\n    })\n    \n    // Send button clicks\n    sendButtons.forEach(button => {\n      button.addEventListener('click', () => {\n        this.handleSubmit()\n      })\n    })\n    \n    // Initial height adjustment\n    this.adjustTextareaHeight(textarea)\n  }\n  \n  adjustTextareaHeight(textarea) {\n    textarea.style.height = 'auto'\n    textarea.style.height = Math.min(textarea.scrollHeight, 120) + 'px'\n  }\n  \n  updateSendButtonState() {\n    const textarea = this.container.querySelector('[data-query-input]')\n    const sendButtons = this.container.querySelectorAll('[data-send-button]')\n    const hasText = textarea.value.trim().length > 0\n    \n    sendButtons.forEach(button => {\n      button.disabled = !hasText || this.isLoading\n    })\n  }\n  \n  handleSubmit() {\n    if (this.isLoading) return\n    \n    const textarea = this.container.querySelector('[data-query-input]')\n    const query = textarea.value.trim()\n    \n    if (query) {\n      this.onSubmit(query)\n    }\n  }\n  \n  setLoading(loading) {\n    this.isLoading = loading\n    const sendButtons = this.container.querySelectorAll('[data-send-button]')\n    const buttonTexts = this.container.querySelectorAll('[data-button-text]')\n    const loadingIcons = this.container.querySelectorAll('[data-loading-icon]')\n    \n    sendButtons.forEach(button => {\n      button.disabled = loading\n    })\n    \n    buttonTexts.forEach(text => {\n      text.textContent = loading ? 'Searching...' : 'Send'\n    })\n    \n    loadingIcons.forEach(icon => {\n      if (loading) {\n        icon.classList.remove('hidden')\n        icon.classList.add('animate-spin')\n      } else {\n        icon.classList.add('hidden')\n        icon.classList.remove('animate-spin')\n      }\n    })\n    \n    this.updateSendButtonState()\n  }\n  \n  setQuery(query) {\n    const textarea = this.container.querySelector('[data-query-input]')\n    textarea.value = query\n    this.adjustTextareaHeight(textarea)\n    this.updateSendButtonState()\n  }\n  \n  clear() {\n    const textarea = this.container.querySelector('[data-query-input]')\n    textarea.value = ''\n    this.adjustTextareaHeight(textarea)\n    this.updateSendButtonState()\n  }\n  \n  focus() {\n    const textarea = this.container.querySelector('[data-query-input]')\n    textarea.focus()\n  }\n} ","export class SearchService {\n  constructor() {\n    this.baseUrl = 'http://192.222.59.156:30888'\n  }\n  \n  async search(query, searchParams = {}) {\n    const {\n      n_docs = 10,\n      nprobe = 32,\n      exact_rerank = false,\n      use_diverse = false,\n      lambda = 0.5\n    } = searchParams\n    \n    const payload = {\n      query: query,\n      nprobe: parseInt(nprobe),\n      n_docs: parseInt(n_docs),\n      use_rerank: exact_rerank,  // Your backend expects 'use_rerank' parameter\n      use_diverse: use_diverse,\n      lambda: lambda\n    }\n    \n    console.log('Search payload:', payload) // Debug log\n    \n    try {\n      const response = await fetch(`${this.baseUrl}/search`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(payload)\n      })\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`)\n      }\n      \n      const data = await response.json()\n      return data\n    } catch (error) {\n      console.error('Search request failed:', error)\n      throw error\n    }\n  }\n  \n  async expand(expandIndexId, expandOffset) {\n    const payload = {\n      expand_index_id: expandIndexId,\n      expand_offset: expandOffset\n    }\n    \n    console.log('Expand payload:', payload) // Debug log\n    \n    try {\n      const response = await fetch(`${this.baseUrl}/search`, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(payload)\n      })\n      \n      if (!response.ok) {\n        throw new Error(`HTTP error! status: ${response.status}`)\n      }\n      \n      const data = await response.json()\n      return data\n    } catch (error) {\n      console.error('Expand request failed:', error)\n      throw error\n    }\n  }\n} ","import { QueryHistory } from './components/QueryHistory.js'\nimport { SearchControls } from './components/SearchControls.js'\nimport { SearchResults } from './components/SearchResults.js'\nimport { QueryInput } from './components/QueryInput.js'\nimport { SearchService } from './services/SearchService.js'\n\nexport class App {\n  constructor(rootElement) {\n    this.root = rootElement\n    this.searchService = new SearchService()\n    this.queryHistory = []\n    this.currentResults = null\n    this.isLoading = false\n    \n    this.init()\n  }\n  \n  init() {\n    this.render()\n    this.loadQueryHistory()\n  }\n  \n  render() {\n    this.root.innerHTML = `\n      <div class=\"flex h-screen bg-chat-bg font-inter\">\n        <!-- Query History Sidebar -->\n        <div class=\"w-80 bg-white border-r border-chat-border flex flex-col\">\n          <div class=\"p-4 border-b border-chat-border\">\n            <h1 class=\"text-xl font-semibold text-chat-text\">Query History</h1>\n          </div>\n          <div id=\"query-history\" class=\"flex-1 overflow-y-auto\"></div>\n        </div>\n        \n        <!-- Main Content Area -->\n        <div class=\"flex-1 flex flex-col\">\n          <!-- Search Controls -->\n          <div id=\"search-controls\" class=\"p-4 border-b border-chat-border bg-white\"></div>\n          \n          <!-- Search Results -->\n          <div id=\"search-results\" class=\"flex-1 overflow-y-auto p-4\"></div>\n          \n          <!-- Query Input -->\n          <div class=\"p-4 border-t border-chat-border bg-white\">\n            <div id=\"query-input\"></div>\n          </div>\n        </div>\n      </div>\n    `\n    \n    this.initializeComponents()\n  }\n  \n  initializeComponents() {\n    // Initialize components\n    this.queryHistoryComponent = new QueryHistory(\n      document.getElementById('query-history'),\n      this.onQueryHistorySelect.bind(this),\n      this.onQueryHistoryRename.bind(this),\n      this.onQueryHistoryDelete.bind(this)\n    )\n    \n    this.searchControlsComponent = new SearchControls(\n      document.getElementById('search-controls'),\n      this.onSearchParamsChange.bind(this)\n    )\n    \n    this.searchResultsComponent = new SearchResults(\n      document.getElementById('search-results'),\n      this.onShowMore.bind(this)\n    )\n    \n    this.queryInputComponent = new QueryInput(\n      document.getElementById('query-input'),\n      this.onQuerySubmit.bind(this)\n    )\n  }\n  \n  async onQuerySubmit(query, searchParams) {\n    if (!query.trim()) return\n    \n    this.isLoading = true\n    this.updateLoadingState()\n    \n    try {\n      const results = await this.searchService.search(query, searchParams)\n      this.currentResults = results\n      \n      // Add to query history\n      const historyItem = {\n        id: Date.now(),\n        query: query,\n        timestamp: new Date().toISOString(),\n        results: results,\n        searchParams: searchParams\n      }\n      \n      this.queryHistory.unshift(historyItem)\n      this.saveQueryHistory()\n      this.queryHistoryComponent.updateHistory(this.queryHistory)\n      \n      // Display results\n      this.searchResultsComponent.displayResults(results)\n      \n    } catch (error) {\n      console.error('Search error:', error)\n      this.searchResultsComponent.displayError('Search failed. Please try again.')\n    } finally {\n      this.isLoading = false\n      this.updateLoadingState()\n    }\n  }\n  \n  onQueryHistorySelect(historyItem) {\n    this.currentResults = historyItem.results\n    this.searchResultsComponent.displayResults(historyItem.results)\n    this.queryInputComponent.setQuery(historyItem.query)\n    this.searchControlsComponent.setSearchParams(historyItem.searchParams)\n  }\n  \n  onQueryHistoryRename(historyItem, newName) {\n    historyItem.query = newName\n    this.saveQueryHistory()\n    this.queryHistoryComponent.updateHistory(this.queryHistory)\n  }\n  \n  onQueryHistoryDelete(historyItem) {\n    this.queryHistory = this.queryHistory.filter(item => item.id !== historyItem.id)\n    this.saveQueryHistory()\n    this.queryHistoryComponent.updateHistory(this.queryHistory)\n  }\n  \n  onSearchParamsChange(searchParams) {\n    // Store current search params for next search\n    this.currentSearchParams = searchParams\n  }\n  \n  async onShowMore(expandIndexId, expandOffset) {\n    try {\n      const expandedResults = await this.searchService.expand(expandIndexId, expandOffset)\n      this.searchResultsComponent.expandPassage(expandIndexId, expandedResults)\n    } catch (error) {\n      console.error('Expand error:', error)\n      this.searchResultsComponent.displayError('Failed to expand passage.')\n    }\n  }\n  \n  updateLoadingState() {\n    this.queryInputComponent.setLoading(this.isLoading)\n    this.searchResultsComponent.setLoading(this.isLoading)\n  }\n  \n  loadQueryHistory() {\n    try {\n      const saved = localStorage.getItem('faiss-rag-query-history')\n      if (saved) {\n        this.queryHistory = JSON.parse(saved)\n        this.queryHistoryComponent.updateHistory(this.queryHistory)\n      }\n    } catch (error) {\n      console.error('Failed to load query history:', error)\n    }\n  }\n  \n  saveQueryHistory() {\n    try {\n      // Keep only last 50 queries\n      const limitedHistory = this.queryHistory.slice(0, 50)\n      localStorage.setItem('faiss-rag-query-history', JSON.stringify(limitedHistory))\n    } catch (error) {\n      console.error('Failed to save query history:', error)\n    }\n  }\n} ","import './style.css'\nimport { App } from './App.js'\n\n// Initialize the app\ndocument.addEventListener('DOMContentLoaded', () => {\n  const root = document.getElementById('root')\n  new App(root)\n}) "],"names":["QueryHistory","container","onSelect","onRename","onDelete","history","item","isEditing","date","time","element","e","itemId","h","input","newName","SearchControls","onChange","button","lambdaSelect","params","nprobeSelect","kSelect","exactRerankButton","diverseSearchButton","SearchResults","onShowMore","passages","passage","index","isExpanded","highlightedText","expandedPassages","expandedPassage","text","matchedSpans","sortedSpans","a","b","result","lastIndex","span","spanText","div","indexId","offset","passageElement","rect","containerRect","scrollTop","results","message","loading","expandedResults","textDiv","originalText","expandedText","mergedText","escapedOriginal","newOffset","QueryInput","onSubmit","textarea","sendButtons","hasText","query","buttonTexts","loadingIcons","icon","SearchService","searchParams","n_docs","nprobe","exact_rerank","use_diverse","lambda","payload","response","error","expandIndexId","expandOffset","App","rootElement","historyItem","saved","limitedHistory","root"],"mappings":"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"}